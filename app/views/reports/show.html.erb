<% breadcrumb(:report, @report) %>

<div class="row">
  <div class="col-md-6">
    <h1><%= @report.display_name %></h1>
  </div>
  <div class="col-md-6 button-actions">
    <%= link_to('<span class="glyphicon glyphicon-file" aria-hidden="true"></span> Download PDF'.html_safe, download_report_path(@report), :class => "btn btn-primary btn-lg") %>
    <%= link_to('<span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit'.html_safe, edit_report_path(@report), :class => "btn btn-default btn-lg") %><br>
  </div>
</div>

<div class="details">
  <div class="row">
    <div class="col-sm-3">Property Name:</div>
    <div class="col-sm-9"><%= @report.property_name %></div>
  </div>
  <div class="row">
    <div class="col-sm-3">Year of Monitoring:</div>
    <div class="col-sm-9"><%= @report.monitoring_year %></div>
  </div>
  <div class="row">
    <div class="col-sm-3">Photographer Name:</div>
    <div class="col-sm-9"><%= @report.photographer_name %></div>
  </div>
  <div class="row">
    <div class="col-sm-3">Created:</div>
    <div class="col-sm-9"><%= l(@report.created_at, :format => :long_tz) %> by <%= @report.creator.email %></div>
  </div>
  <div class="row">
    <div class="col-sm-3">Last Updated:</div>
    <div class="col-sm-9"><%= l(@report.updated_at, :format => :long_tz) %> by <%= @report.updater.email %></div>
  </div>
  <% @report.photos.each do |photo| %>
    <div class="row">
      <div class="col-sm-3"><%= image_tag(photo.image.thumbnail.url, :class => "img-responsive center-block") %></div>
      <div class="col-sm-9">
        <% if(photo.caption.present?) %>
          <p><%= photo.caption %></p>
        <% end %>

        <%= render("photo_metadata", :photo => photo) %>
      </div>
    </div>
  <% end %>
  <% if(@report.upload_progress == "pending") %>
    <div class="row">
      <div class="col-sm-offset-3 col-sm-9">
        <div class="alert alert-info" role="alert">File uploads are in progress...</div>
      </div>
    </div>
  <% end %>
</div>

<div class="row footer">
  <div class="col-sm-12 text-right">
    <%= link_to('<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>Delete'.html_safe, report_path(@report), :method => :delete, :data => { :confirm => "Are you sure you want to delete the #{@report.display_name} monitoring report?" }, :class => "btn btn-danger btn-sm") %>
  </div>
</div>
